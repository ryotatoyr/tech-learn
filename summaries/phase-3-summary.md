# Phase 3 要約: セキュリティ強化 (Security Hardening)

Phase 3では、アプリケーションの脆弱性を修正し、堅牢なシステムを構築するための主要なセキュリティ対策を実装しました。

## 1. 入力バリデーション (Input Validation)
- **概要**: ユーザーからの入力データが期待される形式（型、長さ、形式など）であるかを検証します。
- **実装**: `zod` ライブラリを導入し、リクエストデータのスキーマ（定義）を作成しました。
- **効果**: 不正な形式のデータによるシステムエラーや、予期せぬ動作（バッファオーバーフロー等）を防ぎます。

## 2. パスワードの安全な管理 (Password Hashing)
- **概要**: パスワードを平文で保存せず、不可逆なハッシュ値として保存します。
- **実装**: `argon2` アルゴリズムを使用。ソルト（Salt）を自動的に含めることで、レインボーテーブル攻撃などに対抗します。
- **効果**: 万が一データベースのデータが漏洩しても、ユーザーの実際のパスワードが解読されるリスクを極限まで低減します。

## 3. SQLインジェクション対策 (SQL Injection Prevention)
- **概要**: ユーザー入力をSQLクエリに直接埋め込まず、安全に処理します。
- **実装**: プレースホルダ（`?`）を用いたパラメータ化クエリに修正しました。
- **効果**: 攻撃者が入力フィールドに悪意のあるSQL命令を挿入して、データを改ざんしたり不正に取得したりすることを防ぎます。

## 4. 認証・認可 (Authentication & Authorization)
- **概要**: ユーザーの身元を確認し（認証）、特定の操作を許可するかを決定（認可）します。
- **実装**: `JWT (JSON Web Token)` を導入。
  - ログイン成功時に署名済みのトークンを発行。
  - 以降のリクエストでは、HTTPヘッダーの `Authorization: Bearer <token>` を通じてトークンを検証。
- **効果**: ステートレスで安全なセッション管理を実現し、ログイン済みユーザーのみが特定のエンドポイントにアクセスできるように制御しました。

## まとめ
これらの対策により、OWASP Top 10などの主要なセキュリティリスクの多くをカバーし、プロフェッショナルなレベルの安全性を備えたアーキテクチャへと進化しました。
