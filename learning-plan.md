# セキュアアーキテクチャ・ハンズオン学習計画

この教材では、TypeScriptを使用して「脆弱で保守性の低いコード」を「堅牢で美しいアーキテクチャ」へと進化させる過程を体験します。

## 🎯 学習ゴール
1.  **セキュリティ:** SQLインジェクションや不適切な認証管理などの脆弱性を理解し、対策できる。
2.  **アーキテクチャ:** レイヤードアーキテクチャを理解し、各クラスの責務を適切に分離できる。
3.  **開発スキル:** TypeScriptを用いたモダンなバックエンド開発（Fastify / Zod / Prisma等）の作法を学ぶ。

---

## 🛠 使用技術スタック
- **言語:** TypeScript
- **ランタイム:** Node.js
- **フレームワーク:** Fastify (高速で型親和性が高い)
- **ORM/DB:** Prisma + SQLite (手軽に始められる構成)
- **バリデーション:** Zod

---

## 📅 カリキュラム構成

### 【Phase 1】 悪い見本：Big Ball of Mud（泥団子）
- **状態:** 1つのファイルにDB接続、ビジネスロジック、レスポンス返却が混在。
- **セキュリティ課題:** SQLインジェクション、パスワードの平文保存。
- **アーキテクチャ課題:** 密結合、テスト不可能、可読性最悪。

### 【Phase 2】 整理：レイヤードアーキテクチャへの移行
- **変更:** コードを `Controller`, `Service`, `Repository` の層に分割。
- **学習項目:** 
    - 各層の役割（責務の分離）。
    - DTO（Data Transfer Object）の活用。
    - なぜ「インターフェース」を意識する必要があるのか。

### 【Phase 3】 守備：セキュリティの強化
- **変更:** バリデーションと安全な認証の実装。
- **学習項目:**
    - Zodによる徹底的な入力チェック。
    - パスワードハッシュ化 (Argon2)。
    - JWT (JSON Web Token) による認証と、認可ミドルウェアの実装。

### 【Phase 4】 進化：テストとDI（依存性の注入）
- **変更:** ユニットテストの導入とDIコンテナの検討。
- **学習項目:**
    - モックを使ったテストの書き方。
    - 依存性の注入により、DBがなくてもロジックをテストできる状態を作る。

---

## 🚀 次のステップ
1. プロジェクトの初期化 (`npm init`, TypeScript設定)
2. Phase 1 の「脆弱なコード」の実装開始
