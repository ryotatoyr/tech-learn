# バックエンド性能改善ハンズオン：学習計画

このハンズオンでは、Node.js/TypeScriptアプリケーションのボトルネックを特定し、キャッシュ、DB最適化、非同期処理などを通じてスループットとレスポンス時間を劇的に改善する手法を学びます。

## 🎯 学習ゴール
1.  **プロファイリングと計測:** `clinic.js` や `autocannon` を使用して性能のボトルネックを特定できる。
2.  **キャッシュ戦略:** Redis等を用いた適切なキャッシュレイヤーの導入と、キャッシュパージの管理ができる。
3.  **DB最適化:** インデックスの適切な設定、N+1問題の解消、実行計画の読み方を理解する。
4.  **非同期・並列処理:** Event Loopをブロックしないコードの書き方と、Worker Threadsの活用。

---

## 🛠 使用技術スタック
- **言語/実行環境:** TypeScript / Node.js
- **フレームワーク:** Fastify (高速性に特化したフレームワーク)
- **DB/ORM:** PostgreSQL / Prisma
- **キャッシュ:** Redis
- **負荷試験:** Autocannon, Clinic.js

---

## 📅 カリキュラム構成

### 【Phase 1】 課題の発見：負荷試験とプロファイリング
- **状態:** 大量データを重いロジックで処理する、あえて「遅い」APIの実装。
- **学習項目:** 
    - Autocannonによるベンチマーク測定。
    - Clinic.jsを用いたEvent Loopの遅延、メモリリークの可視化。

### 【Phase 2】 DBの壁：クエリの最適化
- **課題:** スロークエリ、N+1問題。
- **学習項目:**
    - Prismaにおける N+1 問題の発見と解消 (`include` vs `join`)。
    - 適切なインデックスの設計。
    - 実行計画 (EXPLAIN ANALYZE) の確認。

### 【Phase 3】 空間を売って時間を買う：キャッシュの導入
- **課題:** 重複する複雑な計算、頻繁なDBアクセス。
- **学習項目:**
    - Redisによるデータキャッシュ。
    - Cache-Aside パターンの実装。
    - 有効期限(TTL)とキャッシュ一貫性の管理。

### 【Phase 4】 非同期の極み：並列処理とキュー
- **課題:** CPUバウンドな重い処理、同期的な外部API呼び出し。
- **学習項目:**
    - `Promise.all` による並列化。
    - 重い計算処理の Worker Threads への委譲。
    - BullMQ等を用いた非同期ジョブキューの検討。

---

## 🚀 次のステップ
1. プロジェクトの初期化 (`npm install`)
2. Phase 1 の「重いAPI」の実装開始